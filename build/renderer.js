(function(){define([],function(){var e;return e=function(){function e(e,t,n){this.bounds=e,t!=null?this.canvas=t:(this.canvas=Hal.dom.createCanvasLayer(this.bounds[2],this.bounds[3],n),Hal.dom.addCanvas(this.canvas,this.bounds[0],this.bounds[1],!0)),this.ctx=this.canvas.getContext("2d")}return e}(),e.prototype.resize=function(e,t){return this.canvas.width=e,this.canvas.height=t,this.prev_bnds=this.bounds.slice(),this.bounds[2]=e,this.bounds[3]=t},e.prototype.strokePolygon=function(e,t){var n,r,i,s;this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.moveTo(e[0][0],e[0][1]),s=e.slice(1);for(r=0,i=s.length;r<i;r++)n=s[r],this.ctx.lineTo(n[0],n[1]);return this.ctx.closePath(),this.ctx.stroke()},e.prototype.strokePolygonO=function(e,t,n,r){var i,s,o,u;t==null&&(t=0),n==null&&(n=0),this.ctx.strokeStyle=r,this.ctx.translate(t,n),this.ctx.beginPath(),this.ctx.moveTo(e[0][0]-t,e[0][1]-n),u=e.slice(1);for(s=0,o=u.length;s<o;s++)i=u[s],this.ctx.lineTo(i[0]-t,i[1]-n);return this.ctx.closePath(),this.ctx.stroke(),this.ctx.translate(-t,-n)},e.prototype.drawLine=function(e,t,n,r,i){return this.ctx.strokeStyle=i,this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(n,r),this.ctx.closePath(),this.ctx.stroke()},e.prototype.strokeRect=function(e,t){return this.ctx.strokeStyle=t,this.ctx.strokeRect(e[0],e[1],e[2],e[3])},e.prototype.strokeRectO=function(e,t){return this.ctx.strokeStyle=t,this.ctx.strokeRect(e[0]-e[2]*.5,e[1]-e[3]*.5,e[2],e[3])},e.prototype.drawSprite=function(e,t,n){return t==null&&(t=0),n==null&&(n=0),this.ctx.drawImage(e.img,-e.w2-t,-e.h2-n)},e})}).call(this);