(function(){define([],function(){var e;return e=function(){function e(){this.hit_ctx=this.createCanvas(1,1).getContext("2d"),this.tint_ctx=this.createCanvas(800,600).getContext("2d")}return e.prototype.createCanvas=function(e,t){var n;return n=document.createElement("canvas"),n.width=e,n.height=t,n},e.prototype.clipImage=function(e,t){var n,r;return n=this.createCanvas(t.w,t.h),r=n.getContext("2d"),r.drawImage(e,t.x,t.y,t.w,t.h,0,0,t.w,t.h),e=new Image,e.src=n.toDataURL("image/png"),e},e.prototype.isTransparent=function(e,t,n){var r,i;return r=this.createCanvas(1,1).getContext("2d"),r.drawImage(e,t,n,1,1,0,0,1,1),i=r.getImageData(0,0,1,1).data,i[3]<150},e.prototype.getPixelAt=function(e,t,n){var r,i,s;return r=this.hit_canvas.getContext("2d"),r.drawImage(e,t,n,1,1,0,0,1,1),i=r.getImageData(0,0,1,1).data,s=(t+n)*4,[i[s],i[s+1],i[s+2],i[s+3]]},e.prototype.tintImage=function(e,t,n){var r,i;return r=this.createCanvas(e.width,e.height),i=r.getContext("2d"),i.globalAlpha=1,i.drawImage(e,0,0),i.globalAlpha=n,i.globalCompositeOperation="source-atop",i.fillStyle=t,i.fillRect(0,0,e.width,e.height),r},e}(),e})}).call(this);